{"data":{"site":{"siteMetadata":{"url":"https://developer-diary.netlify.com","title":"danivelop's blog","labels":[{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"graphql","tech":"GraphQL","name":"M14.051 2.751l4.935 2.85c.816-.859 2.173-.893 3.032-.077.148.14.274.301.377.477.589 1.028.232 2.339-.796 2.928-.174.1-.361.175-.558.223v5.699c1.146.273 1.854 1.423 1.58 2.569-.048.204-.127.4-.232.581-.592 1.023-1.901 1.374-2.927.782-.196-.113-.375-.259-.526-.429l-4.905 2.832c.372 1.124-.238 2.335-1.361 2.706-.217.071-.442.108-.67.108-1.181.001-2.139-.955-2.14-2.136 0-.205.029-.41.088-.609l-4.936-2.847c-.816.854-2.171.887-3.026.07-.854-.816-.886-2.171-.07-3.026.283-.297.646-.506 1.044-.603l.001-5.699c-1.15-.276-1.858-1.433-1.581-2.584.047-.198.123-.389.224-.566.592-1.024 1.902-1.374 2.927-.782.177.101.339.228.48.377l4.938-2.85C9.613 1.612 10.26.423 11.39.088 11.587.029 11.794 0 12 0c1.181-.001 2.139.954 2.14 2.134.001.209-.03.418-.089.617zm-.515.877c-.019.021-.037.039-.058.058l6.461 11.19c.026-.009.056-.016.082-.023V9.146c-1.145-.283-1.842-1.442-1.558-2.588.006-.024.012-.049.019-.072l-4.946-2.858zm-3.015.059l-.06-.06-4.946 2.852c.327 1.135-.327 2.318-1.461 2.645-.026.008-.051.014-.076.021v5.708l.084.023 6.461-11.19-.002.001zm2.076.507c-.39.112-.803.112-1.192 0l-6.46 11.189c.294.283.502.645.6 1.041h12.911c.097-.398.307-.761.603-1.044L12.597 4.194zm.986 16.227l4.913-2.838c-.015-.047-.027-.094-.038-.142H5.542l-.021.083 4.939 2.852c.388-.404.934-.653 1.54-.653.627 0 1.19.269 1.583.698z","size":20,"color":"hotpink"}]}},"markdownRemark":{"html":"<p>React를 사용해 개발을 하다보면 한 컴포넌트가 렌더링을 연속으로 여러번 하거나, 결과가 의도치 않게 나오는 경우가 종종 있습니다. 혹은, 최적화 등 성능적으로 고민해야 할 때도 있습니다. 저도 처음에는 단순히 React의 사용법만 익히고 개발했지만 위와 같은 경우를 겪었을 때, 해결하기 위해선 React가 어떻게 렌더링되고 DOM의 변경을 최소화 하는지 등 더 깊게 알아야 했습니다.\n그래서 React의 렌더링 과정과 virtual DOM이 어떻게 동작하는지 공부한 것들을 정리했습니다.</p>\n<blockquote>\n<p>혹시 틀린 내용이나 수정할 부분이 있으면 언제든지 말씀해 주세요.</p>\n</blockquote>\n<h3>Table of contents</h3>\n<ul>\n<li><a href=\"#react-element\">React element</a></li>\n<li><a href=\"#virtual-dom\">Virtual DOM</a></li>\n<li><a href=\"#react-%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81\">React 리렌더링</a></li>\n</ul>\n<h2>React element</h2>\n<p>먼저, React의 렌더링 과정을 살펴보기 위해 아주 간단한 예제를 만들어 보겠습니다.</p>\n<h4>code example</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">react-rendering-process\n└── src\n  ├── index.js\n  └── components\n    ├── MyPage.js\n    ├── Color.js\n    └── Button.js</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Color <span class=\"token keyword\">from</span> <span class=\"token string\">'./Color'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Button <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sam'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mike'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'White'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Rosegold'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">randomName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> names<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>  \n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">randomColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> colors<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>color<span class=\"token punctuation\">,</span> setColor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChangeName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> newName <span class=\"token operator\">=</span> <span class=\"token function\">randomName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>newName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChangeColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> newColor <span class=\"token operator\">=</span> <span class=\"token function\">randomColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span>newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>제 이름은 <span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span> 입니다<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\t  <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChangeName<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>이름 변경<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\t  <span class=\"token operator\">&lt;</span>Color color<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t  <span class=\"token operator\">&lt;</span>Button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChangeColor<span class=\"token punctuation\">}</span>  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyPage<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Color</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> color <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>제가 가장 좋아하는 색은 <span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">}</span> 입니다<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Color<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Button</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onClick <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>button  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>색상 변경<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Button<span class=\"token punctuation\">;</span></code></pre></div>\n<p>React를 어느정도 사용해보셨다면 위의 코드에 대한 결과는 쉽게 예측하실 수 있을거라고 생각합니다. React는 주로 element를 정의할 때, JSX 문법을 사용합니다.  JSX문법은 자바스크립트 표준 문법이 아니기 때문에 babel과 같은 트랜스 파일러를 통해 변환이 필요합니다. 결국, 위의 코드를 변환하게 되면 아래와 같은 코드가 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'제 이름은 '</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">' 입니다.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> onClick<span class=\"token punctuation\">:</span>  handleChangeName <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'이름 변경'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>Color<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>Button<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> onClick<span class=\"token punctuation\">:</span> handleChangeColor <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">...</span></code></pre></div>\n<p>위와 같이 React는 <code class=\"language-text\">React.element(&lt;element명&gt;, &lt;속성&gt;, ...&lt;자식element&gt;)</code>를 통해 React element를 정의하게 됩니다. </p>\n<blockquote>\n<p>React는 렌더링을 효율적으로 하기 위해서 <strong>Virtual DOM</strong>이라는 개념을 사용합니다. 바로 실제로 우리가 눈으로 볼 수 있는 화면으로 렌더링 하기 전, 렌더링을 하기 위한 element들의 정보를 담고 있는 객체를 만들게 됩니다. 이 객체는 매번 React의 컴포넌트가 렌더링 될 때마다 생성되며 이전에 생성된 객체와 비교하여 실제로 변경 되어야 하는 부분을 찾아 돔 변경을 최소화 합니다.</p>\n</blockquote>\n<h2>Virtual DOM</h2>\n<p>그럼, React가 위의 <a href=\"#code-example\">예제코드</a>를 어떻게 Virtual DOM으로 만드는지 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> ─── ①\n  key<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> ─── ②\n  ref<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> ─── ③\n  props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'제 이름은 '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' 입니다.'</span><span class=\"token punctuation\">]</span> ─── ④\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          onClick<span class=\"token punctuation\">:</span> handleChangeName<span class=\"token punctuation\">,</span> ─── ⑤\n          children<span class=\"token punctuation\">:</span> <span class=\"token string\">'이름 변경'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> Color<span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          color<span class=\"token punctuation\">:</span> <span class=\"token string\">'Skyblue'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> Button<span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          onClick<span class=\"token punctuation\">:</span> handleChangeColor\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음과 같이 <strong>①</strong> <code class=\"language-text\">type</code>에는 문자열 형태의 html 태그 혹은 컴포넌트가 들어가며 <strong>②</strong> <code class=\"language-text\">key</code>속성에는 해당 element가  <code class=\"language-text\">key</code>를 가지고 있을 경우, 할당됩니다.  <strong>③</strong> <code class=\"language-text\">ref</code>속성도 마찬가지로, 해당 element가 <code class=\"language-text\">ref</code>를 가지고 있다면 할당됩니다. <code class=\"language-text\">key</code>와 <code class=\"language-text\">ref</code>를 제외한 나머지 속성값은 <code class=\"language-text\">props</code>에 들어가게 되는데 그 중, <code class=\"language-text\">children</code>에는 해당 element의 자식element가 할당됩니다. <strong>④</strong> 만약, children에 표현식이 쓰였다면 표현식을 기점으로 분할되어 들어갑니다. <strong>⑤</strong> 또한, <code class=\"language-text\">props</code>로 배열, 객체, 함수 와 같은 참조타입 값이 주어지면 해당 값을 참조하는 값이 들어가게 됩니다.</p>\n<p>하지만, 아직 Virtual DOM을 완성하지 못했습니다. React가 Virtual DOM을 통해 실제 DOM을 생성하기 위해서는 Virtual DOM의 모든 <code class=\"language-text\">type</code>이 문자열 즉, html태그여야 합니다. 하지만, 위의 예시에서는 아직 <code class=\"language-text\">type</code>에 <code class=\"language-text\">Color</code>와 <code class=\"language-text\">Button</code>이 남아있습니다. 이들 모두 컴포넌트이기 때문에 functional 컴포넌트라면 그대로 호출하고 class 컴포넌트라면 <code class=\"language-text\">render</code>함수를 호출하여 해당 컴포넌트의 렌더링에 대한 정보를 얻을 수 있습니다. 이 과정을 통해 최종적으로 완성된 Virtual DOM은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>\n  key<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  ref<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'제 이름은 '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' 입니다.'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          onClick<span class=\"token punctuation\">:</span> handleChangeName<span class=\"token punctuation\">,</span>\n          children<span class=\"token punctuation\">:</span> <span class=\"token string\">'이름 변경'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'p'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'제가 가장 좋아하는 색은 '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' 입니다.'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          onClick<span class=\"token punctuation\">:</span> handleChangeColor\n          children<span class=\"token punctuation\">:</span> <span class=\"token string\">'색상 변경'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React는 렌더링을 할 때 마다 이러한 과정으로 Virtual DOM을 생성하고 이전에 생성된 Virtual DOM과 비교하여 변경된 부분을 찾아냅니다. 그럼, React는 어떻게 변경된 부분을 찾아내는지 보겠습니다.</p>\n<h2>React 리렌더링</h2>\n<h3>컴포넌트의 업데이트</h3>\n<p>React에서 리렌더링이 일어나는 경우는 크게 3가지가 있습니다. (이 외에도 더 있지만 글에서는 3가지만 다루겠습니다.)</p>\n<ul>\n<li>컴포넌트의 <code class=\"language-text\">state</code>가 변경된 경우</li>\n<li>컴포넌트의 <code class=\"language-text\">props</code>가 변경된 경우</li>\n<li>부모 컴포넌트가 리렌더링 된 경우</li>\n</ul>\n<p>그리고 React에서 컴포넌트의 업데이트는 2가지 단계로 나뉩니다.</p>\n<ul>\n<li>렌더단계 : 실제 DOM에 반영하기 전, 변경사항을 파악하는 단계</li>\n<li>커밋단계 : 렌더단계에서 파악된 변경사항을 실제 DOM에 반영하는 단계</li>\n</ul>\n<p>위의 <a href=\"#code-example\">예제코드</a>에서 '이름 변경' 버튼을 클릭할 경우, 렌더링 관련하여 어떤 일이 일어나는지 살펴보겠습니다. '이름 변경' 버튼을 클릭하면 <code class=\"language-text\">handleChangeName</code>함수가 호출되고 <code class=\"language-text\">setName</code>함수에 의해 <code class=\"language-text\">MyPage</code>컴포넌트의 상탯값이 변경됩니다. 상탯값이 변경됐으니 <code class=\"language-text\">MyPage</code>컴포넌트는 리렌더링을 하게 됩니다. 이렇게 되면 자식 컴포넌트인 <code class=\"language-text\">Color</code>, <code class=\"language-text\">Button</code> 컴포넌트도 함께 리렌더링을 하게 됩니다.</p>\n<p>여기서 중요한 점은 <code class=\"language-text\">Color</code>컴포넌트는 먼저 렌더단계를 거치게 되는데 렌더단계에서는 <code class=\"language-text\">Color</code>컴포넌트에 대한 Virtual DOM을 다시 만들게 되고 이를 이전에 만들어진 Virtual DOM과 비교합니다. 하지만, 위의  <a href=\"#code-example\">예제코드</a>에서는 <code class=\"language-text\">name</code>을 변경해도 <code class=\"language-text\">color</code>는 바뀌지 않기 때문에 결국 <code class=\"language-text\">Color</code>컴포넌트의 <code class=\"language-text\">props</code>로 전달된 <code class=\"language-text\">color</code>는 바뀌지 않습니다. 즉, <code class=\"language-text\">Color</code>컴포넌트는 실제로 변경된 사항이 없으니 렌더단계는 거치더라도 커밋단계에서는 하는일이 없게 됩니다.</p>\n<p>위의 내용을 정리해 보겠습니다.</p>\n<ol>\n<li>'이름 변경' 버튼을 클릭한다.</li>\n<li><code class=\"language-text\">MyPage</code>컴포넌트의 상태가 변하고 리렌더링 된다.</li>\n<li>자식 컴포넌트인 <code class=\"language-text\">Color</code>, <code class=\"language-text\">Button</code> 컴포넌트도 리렌더링을 한다.</li>\n<li><code class=\"language-text\">Color</code>컴포넌트는 Virtual DOM을 만들고 이전값과 비교하는 렌더단계를 거친다.</li>\n<li>실제로 변경된 사항은 없으므로 커밋단계에서는 업데이트 비용이 들지 않는다.</li>\n</ol>\n<h3>최적화</h3>\n<p>'이름 변경' 버튼을 클릭하여 <code class=\"language-text\">name</code>이 변경됨으로 인해 <code class=\"language-text\">Color</code>컴포넌트가 렌더단계는 거치더라도 실제 DOM에는 반영을 하지 않으므로 성능에 큰 문제는 없습니다. 하지만, 만약 <code class=\"language-text\">Color</code>컴포넌트가 매우 복잡한 컴포넌트라서 Virtual DOM을 생성하고 이전에 생성된 Virtual DOM과 비교하는 작업도 비용이 많이 들어갈 수 있습니다. 이 때, <code class=\"language-text\">props</code>가 변하지 않았다면 이런 과정도 생략을 해줄 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>MyPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyPage<span class=\"token punctuation\">;</span></code></pre></div>\n<p>위의 코드와 같이 functional 컴포넌트에서는 <code class=\"language-text\">React.memo</code>사용하거나 class 컴포넌트에서는 <code class=\"language-text\">React.PureComponent</code>를 상속받게 되면 해당 컴포넌트의 <code class=\"language-text\">props</code>가 변경되지 않았다면 더 이상 렌더링을 진행하지 않습니다. 다시 말해, '이름 변경' 버튼을 클릭하여 <code class=\"language-text\">MyPage</code>컴포넌트가 리렌더링 되어도 <code class=\"language-text\">Color</code>컴포넌트의 <code class=\"language-text\">props</code>로 전달되는 <code class=\"language-text\">color</code>는 변하지 않았으므로 <code class=\"language-text\">Color</code>컴포넌트는 렌더링 단계를 거치지 않습니다.</p>\n<p>하지만, 아직 한가지 더 신경 써줘야 할 부분이 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token function-variable function\">handleChangeName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">handleChangeColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChangeName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChangeColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>class 컴포넌트는 초기 생성될 때 인스턴스 형태로 생성되기 때문에 리렌더링 되는 경우에도 class 내부의 <code class=\"language-text\">render</code>함수만 다시 호출할 뿐입니다. 즉, 멤버함수인 <code class=\"language-text\">handleChangeName</code>와 <code class=\"language-text\">handleChangeColor</code>는 리렌더링시에도 다시 재할당되지 않습니다. 하지만 functional 컴포넌트는  리렌더링 되면 컴포넌트 자체를 호출하기 때문에 <code class=\"language-text\">handleChangeName</code>와 <code class=\"language-text\">handleChangeColor</code>가 매번 재할당 됩니다. 따라서, <code class=\"language-text\">MyPage</code>컴포넌트가 리렌더링 될 때마다 <code class=\"language-text\">Button</code>컴포넌트의 <code class=\"language-text\">props</code>로 전달되는 <code class=\"language-text\">handleChangeColor</code>가 재할당 되기 때문에 <code class=\"language-text\">Button</code>컴포넌트는 불필요하게 렌더단계를 거치게 됩니다.</p>\n<p>이렇게 functional 컴포넌트에서 매번 함수가 새로 할당되는 경우를 막기 위해 React에서는 <code class=\"language-text\">useCallback</code> hooks를 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyPage</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">const</span> handleChangeName <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> handleChangeColor <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">...</span></code></pre></div>\n<p><code class=\"language-text\">useCallback</code>은 2번째 인자로 넣어준 배열안의 데이터가 변경되지 않았다면 함수를 새로 생성하지 않고 이전에 있던 값을 재사용 합니다. 따라서 '이름 변경' 버튼클 클릭해 <code class=\"language-text\">MyPage</code>컴포넌트가 리렌더링 되도 <code class=\"language-text\">handleChangeColor</code>는 초기에 할당 되었던 값 그대로 재사용되므로 <code class=\"language-text\">Button</code>컴포넌트도 렌더링 단계를 거치지 않게 됩니다.</p>\n<blockquote>\n<p>React는 이렇게 <code class=\"language-text\">props</code>가 실제로 변경되었는지에 따라 렌더링 과정이 달라지는데 위의 예시에서도 <code class=\"language-text\">React.memo</code>를 통해 <code class=\"language-text\">props</code>가 변경되지 않았다면 렌더링 과정을 진행하지 않는것을 보았습니다. 그럼 React는 어떻게 변경사항을 효율적으로 파악할까요? 여기서 객체의 불변성이라는 개념이 등장합니다.</p>\n</blockquote>\n<h3>객체의 불변성</h3>\n<p><code class=\"language-text\">Color</code>컴포넌트의 변경사항을 파악하기 위해서는 <code class=\"language-text\">Color</code>컴포넌트가 렌더단계를 거치며 새로 전달된 <code class=\"language-text\">props</code>를 이전에 존재했던 <code class=\"language-text\">props</code>와 비교해야 하는데 위의 <a href=\"#code-example\">예제코드</a>에서는 <code class=\"language-text\">props</code>로 전달된 <code class=\"language-text\">color</code>가 단순 문자열이기 때문에 <code class=\"language-text\">prevProps.color === nextProps.color</code>와 같이 단순 비교로 실제로 변경되었는지 알 수 있습니다.</p>\n<p>하지만, 만약 <code class=\"language-text\">Color</code>컴포넌트로 전달된 속성인 <code class=\"language-text\">color</code>가 문자열이 아닌 객체와 같은 참조타입 이었다면 어떻게 됐을까요? 예를 한번 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>colors<span class=\"token punctuation\">,</span> setColors<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'White'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Rosegold'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//1번</span>\n<span class=\"token function-variable function\">onClick1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  colors<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setColors</span><span class=\"token punctuation\">(</span>colors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//2번</span>\n<span class=\"token function-variable function\">onClick2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> newColors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>colors<span class=\"token punctuation\">,</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setColors</span><span class=\"token punctuation\">(</span>newColors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 예시에서 1번에서는 <code class=\"language-text\">colors</code>내부의 데이터가 실제로 변경되었는지 파악하기 위해선 <code class=\"language-text\">colors</code>의 모든 인덱스를 검사해야 합니다. <code class=\"language-text\">colors</code>안의 인덱스가 100만개라면 100만번 검사해야 하죠. 하지만 2번에서는 <code class=\"language-text\">prevColors === nextColors</code>와 같이 한번의 연산만으로 검사가 가능합니다. 이와 같은 이유로 React는 객체, 배열과 같은 참조타입은 데이터 변경시 새로운 객체를 할당하여 불변성을 유지합니다.</p>\n<p>이렇게 불변성을 유지하게 되면</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> prevProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  names<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sam'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mike'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'White'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Rosegold'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> nextProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  names<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Daniel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sam'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mike'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Skyblue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'White'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Rosegold'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>와 같이 <code class=\"language-text\">props</code> 객체에 직접 연결(1-depth)되 있는 값들만 단순비교하면 <code class=\"language-text\">props</code>의 변경 여부를 알 수 있습니다.</p>\n<hr>\n<p>이렇게 React가 어떤 과정을 통해 렌더링 되고 어떻게 효율적이고 최소한으로 렌더링을 하는지 정리했습니다. React는 이 외에도 서비스를 효율적으로 만들기 위해 더 다양한 방법들을 많이 제공하지만 이 글에서 다룬 가장 기초가 되는 개념들을 알고 있다면 React의 더 깊은 개념을 학습하는데 조금 더 수월할 거라고 생각합니다.</p>","frontmatter":{"title":"React의 렌더링 과정","date":"May 01, 2020","tags":["javascript","react"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/react-rendering/"}}